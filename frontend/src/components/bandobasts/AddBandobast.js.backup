"use client";

import React, { useState, useEffect } from "react";
import { useRouter } from "next/navigation";
import useApi from "@/hooks/useApi";
import {
  Save,
  X,
  ChevronRight,
  ChevronLeft,
  Shield,
  MapPin,
  Users,
  Settings,
  Bell,
  Eye,
  FileText,
  CheckCircle,
  Calendar,
  AlertTriangle,
} from "lucide-react";
import StaffManagement from "./StaffManagement";

export default function AddBandobast() {
  const router = useRouter();
  const { callApi } = useApi();
  const [currentStep, setCurrentStep] = useState(0);
  const [showStaffModal, setShowStaffModal] = useState(false);
  const [staffList, setStaffList] = useState([]);

  // Master data state
  const [masterData, setMasterData] = useState({
    bandobastTypes: [],
    priorityLevels: [],
    vipCategories: [],
    threatLevels: [],
    approvingAuthorities: [],
  });
  const [masterDataLoading, setMasterDataLoading] = useState(true);

  // Form state for all sections
  const [formData, setFormData] = useState({
    // Section 1: Basic Details
    bandobastName: "",
    bandobastType: "",
    priorityLevel: "",
    eventDescription: "",
    startDate: "",
    startTime: "",
    endDate: "",
    endTime: "",

    // Section 2: Location & Jurisdiction
    state: "Gujarat",
    district: "",
    cityTaluka: "",
    policeRange: "",
    division: "",
    policeStations: [],
    controlRoomLocation: "",

    // Section 3: Event/VIP Details
    vipEventName: "",
    vipCategory: "",
    expectedCrowdSize: "",
    threatLevel: "",
    intelligenceNotes: "",
    routeMap: null,

    // Section 4: Bandobast Structure
    totalAreas: "",
    areas: [],

    // Section 5: Manpower Planning
    totalForceRequired: "",
    piRequired: "",
    psiRequired: "",
    constableRequired: "",
    homeGuardRequired: "",
    srpRequired: false,
    trafficPoliceRequired: false,
    womanPoliceRequired: "",
    shiftType: "",
    shiftTimings: [],

    // Section 6: Officer Assignment
    assignmentMode: "",
    selectionCriteria: [],
    reportingOfficer: "",
    backupOfficer: "",
    replacementAllowed: false,

    // Section 7: Duty Instructions
    generalInstructions: "",
    pointwiseInstructions: "",
    emergencyProtocol: "",
    equipmentList: [],
    uniformType: "",

    // Section 8: Communication
    groupChatEnabled: false,
    notificationMode: [],
    emergencyBroadcast: false,
    language: "",

    // Section 9: Monitoring
    liveLocationTracking: false,
    locationUpdateInterval: "",
    attendanceMode: "",
    geoFencingEnabled: false,
    alertRules: [],

    // Section 10: Approval
    approvingAuthority: "",
    remarks: "",

    // Section 11: Post-Bandobast
    autoReportGeneration: false,
    incidentLogging: false,
    photoVideoUpload: false,
    feedbackRequired: false,
  });

  // Fetch master data on component mount
  useEffect(() => {
    const fetchMasterData = async () => {
      try {
        setMasterDataLoading(true);

        const [bandobastTypes, priorityLevels, vipCategories, threatLevels, approvingAuthorities] = await Promise.all([
          callApi("get", "/master-data/bandobast-types?page=1&limit=1000"),
          callApi("get", "/master-data/priority-levels?page=1&limit=1000"),
          callApi("get", "/master-data/vip-categories?page=1&limit=1000"),
          callApi("get", "/master-data/threat-levels?page=1&limit=1000"),
          callApi("get", "/master-data/approving-authorities?page=1&limit=1000"),
        ]);

        setMasterData({
          bandobastTypes: bandobastTypes?.data || [],
          priorityLevels: priorityLevels?.data || [],
          vipCategories: vipCategories?.data || [],
          threatLevels: threatLevels?.data || [],
          approvingAuthorities: approvingAuthorities?.data || [],
        });
      } catch (error) {
        console.error("Error fetching master data:", error);
      } finally {
        setMasterDataLoading(false);
      }
    };

    fetchMasterData();
  }, []);

  const steps = [
    {
      id: 0,
      title: "Basic Details",
      icon: Shield,
      description: "Core information",
    },
    {
      id: 1,
      title: "Location & Event",
      icon: MapPin,
      description: "Location & VIP details",
    },
    {
      id: 2,
      title: "Structure & Manpower",
      icon: Users,
      description: "Setup & force planning",
    },
    {
      id: 3,
      title: "Officers & Instructions",
      icon: FileText,
      description: "Assignment & duties",
    },
    {
      id: 4,
      title: "Communication & Monitoring",
      icon: Bell,
      description: "Alerts & tracking",
    },
    {
      id: 5,
      title: "Approval & Post-Event",
      icon: CheckCircle,
      description: "Authority & settings",
    },
  ];

  const handleInputChange = (field, value) => {
    setFormData((prev) => ({ ...prev, [field]: value }));
  };

  const handleNext = () => {
    if (currentStep < steps.length - 1) {
      setCurrentStep(currentStep + 1);
    }
  };

  const handlePrevious = () => {
    if (currentStep > 0) {
      setCurrentStep(currentStep - 1);
    }
  };

  const handleSubmit = async (e) => {
    e.preventDefault();

    // Map frontend camelCase to backend snake_case
    const payload = {
      bandobast_name: formData.bandobastName,
      bandobast_type_id: parseInt(formData.bandobastType),
      priority_id: parseInt(formData.priorityLevel),
      start_date: formData.startDate,
      start_time: formData.startTime,
      end_date: formData.endDate,
      end_time: formData.endTime,
      event_description: formData.eventDescription,

      // Location
      state_id: null, // Set to null until state selection is implemented
      district: formData.district,
      city_taluka: formData.cityTaluka,
      city_id: null, // No city selection logic yet
      police_range: formData.policeRange,
      division: formData.division,
      control_room_location: formData.controlRoomLocation,

      // Structure
      total_areas: parseInt(formData.totalAreas) || 0,

      // Manpower
      total_force: parseInt(formData.totalForceRequired) || 0,
      pi_count: parseInt(formData.piRequired) || 0,
      psi_count: parseInt(formData.psiRequired) || 0,
      constable_count: parseInt(formData.constableRequired) || 0,
      home_guard_count: parseInt(formData.homeGuardRequired) || 0,
      woman_police_count: parseInt(formData.womanPoliceRequired) || 0,
      srp_required: formData.srpRequired,
      traffic_police_required: formData.trafficPoliceRequired,
      shift_type: formData.shiftType,

      // Details
      vip_event_name: formData.vipEventName,
      vip_category_id: formData.vipCategory ? parseInt(formData.vipCategory) : null,
      expected_crowd: parseInt(formData.expectedCrowdSize) || 0,
      threat_level_id: formData.threatLevel ? parseInt(formData.threatLevel) : null,
      intelligence_notes: formData.intelligenceNotes,

      // Officers
      assignment_mode: formData.assignmentMode,
      reporting_officer: formData.reportingOfficer,
      backup_officer: formData.backupOfficer,
      replacement_allowed: formData.replacementAllowed,

      // Instructions
      general_instructions: formData.generalInstructions,
      pointwise_instructions: formData.pointwiseInstructions,
      emergency_protocol: formData.emergencyProtocol,
      uniform_type: formData.uniformType,

      // Communication
      group_chat_enabled: formData.groupChatEnabled,
      emergency_broadcast: formData.emergencyBroadcast,
      language: formData.language,

      // Monitoring
      live_location_tracking: formData.liveLocationTracking,
      location_update_interval: formData.locationUpdateInterval,
      attendance_mode: formData.attendanceMode,
      geo_fencing_enabled: formData.geoFencingEnabled,

      // Approval
      approving_authority_id: parseInt(formData.approvingAuthority),
      remarks: formData.remarks,

      // Post event
      auto_report_generation: formData.autoReportGeneration,
      incident_logging: formData.incidentLogging,
      photo_video_upload: formData.photoVideoUpload,
      feedback_required: formData.feedbackRequired,

      status: 'Active',
      approval_status: 'Draft',

      // Staff mapping
      staff: staffList.map(s => ({
        name: s.name,
        mobile_number: s.mobileNumber,
        buckle_number: s.buckleNumber,
        designation: s.designation,
        duty_location: s.dutyLocation
      }))
    };

    try {
      const response = await callApi("post", "/bandobasts", payload);

      if (response && response.success) {
        // showToast("Bandobast created successfully!", "success"); // Need to import showToast if we use it, or relies on global
        console.log("Created successfully", response);
        router.push("/my-admin/bandobasts");
      }
    } catch (error) {
      console.error("Failed to create bandobast", error);
    }
  };

  const renderStepContent = () => {
    switch (currentStep) {
      case 0:
        return (
          <div className="space-y-6">
            <h3 className="text-xl font-bold text-gray-900 dark:text-white mb-4">
              Bandobast Basic Details
            </h3>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Bandobast Name <span className="text-red-500">*</span>
                </label>
                <input
                  type="text"
                  value={formData.bandobastName}
                  onChange={(e) => handleInputChange("bandobastName", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="e.g., PM Visit - Ahmedabad"
                  required
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Bandobast Type <span className="text-red-500">*</span>
                </label>
                <select
                  value={formData.bandobastType}
                  onChange={(e) => handleInputChange("bandobastType", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                  disabled={masterDataLoading}
                >
                  <option value="">{masterDataLoading ? "Loading..." : "Select Type"}</option>
                  {masterData.bandobastTypes.map((type) => (
                    <option key={type.id} value={type.id}>{type.name}</option>
                  ))}
                </select>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Priority Level <span className="text-red-500">*</span>
                </label>
                <select
                  value={formData.priorityLevel}
                  onChange={(e) => handleInputChange("priorityLevel", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                  disabled={masterDataLoading}
                >
                  <option value="">{masterDataLoading ? "Loading..." : "Select Priority"}</option>
                  {masterData.priorityLevels.map((level) => (
                    <option key={level.id} value={level.id}>{level.name}</option>
                  ))}
                </select>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Start Date <span className="text-red-500">*</span>
                </label>
                <input
                  type="date"
                  value={formData.startDate}
                  onChange={(e) => handleInputChange("startDate", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Start Time <span className="text-red-500">*</span>
                </label>
                <input
                  type="time"
                  value={formData.startTime}
                  onChange={(e) => handleInputChange("startTime", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  End Date <span className="text-red-500">*</span>
                </label>
                <input
                  type="date"
                  value={formData.endDate}
                  onChange={(e) => handleInputChange("endDate", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  End Time <span className="text-red-500">*</span>
                </label>
                <input
                  type="time"
                  value={formData.endTime}
                  onChange={(e) => handleInputChange("endTime", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                />
              </div>
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                Event Description
              </label>
              <textarea
                value={formData.eventDescription}
                onChange={(e) => handleInputChange("eventDescription", e.target.value)}
                rows={4}
                className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="Short briefing of the event..."
              />
            </div>
          </div>
        );

      case 1:
        return (
          <div className="space-y-6">
            <h3 className="text-xl font-bold text-gray-900 dark:text-white mb-4">
              Location & Event Details
            </h3>

            {/* Location & Jurisdiction */}

            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  State
                </label>
                <input
                  type="text"
                  value={formData.state}
                  disabled
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-white"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  District <span className="text-red-500">*</span>
                </label>
                <select
                  value={formData.district}
                  onChange={(e) => handleInputChange("district", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                >
                  <option value="">Select District</option>
                  <option value="Ahmedabad">Ahmedabad</option>
                  <option value="Surat">Surat</option>
                  <option value="Vadodara">Vadodara</option>
                  <option value="Rajkot">Rajkot</option>
                  <option value="Gandhinagar">Gandhinagar</option>
                </select>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  City / Taluka
                </label>
                <input
                  type="text"
                  value={formData.cityTaluka}
                  onChange={(e) => handleInputChange("cityTaluka", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="Enter city or taluka"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Police Range
                </label>
                <input
                  type="text"
                  value={formData.policeRange}
                  onChange={(e) => handleInputChange("policeRange", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="Enter police range"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Division
                </label>
                <input
                  type="text"
                  value={formData.division}
                  onChange={(e) => handleInputChange("division", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="Enter division"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Control Room Location
                </label>
                <input
                  type="text"
                  value={formData.controlRoomLocation}
                  onChange={(e) => handleInputChange("controlRoomLocation", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="Main control point location"
                />
              </div>
            </div>
          </div>
        );

      case 4:
        return (
          <div className="space-y-6">
            <div className="flex items-center justify-between mb-4">
              <h3 className="text-xl font-bold text-gray-900 dark:text-white">
                Manpower Planning
              </h3>
              <button
                type="button"
                onClick={() => setShowStaffModal(true)}
                className="px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-medium rounded-lg shadow-lg transition-all"
              >
                <Users className="w-4 h-4 inline mr-2" />
                Manage Staff List
              </button>
            </div>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Total Force Required <span className="text-red-500">*</span>
                </label>
                <input
                  type="number"
                  value={formData.totalForceRequired}
                  onChange={(e) => handleInputChange("totalForceRequired", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="Total manpower"
                  required
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  PI Required
                </label>
                <input
                  type="number"
                  value={formData.piRequired}
                  onChange={(e) => handleInputChange("piRequired", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="Police Inspector count"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  PSI Required
                </label>
                <input
                  type="number"
                  value={formData.psiRequired}
                  onChange={(e) => handleInputChange("psiRequired", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="Police Sub-Inspector count"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Constable Required
                </label>
                <input
                  type="number"
                  value={formData.constableRequired}
                  onChange={(e) => handleInputChange("constableRequired", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="Constable count"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Home Guard Required
                </label>
                <input
                  type="number"
                  value={formData.homeGuardRequired}
                  onChange={(e) => handleInputChange("homeGuardRequired", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="Home Guard count"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Woman Police Required
                </label>
                <input
                  type="number"
                  value={formData.womanPoliceRequired}
                  onChange={(e) => handleInputChange("womanPoliceRequired", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="Woman Police count"
                />
              </div>

              <div className="flex items-center gap-4">
                <label className="flex items-center gap-2">
                  <input
                    type="checkbox"
                    checked={formData.srpRequired}
                    onChange={(e) => handleInputChange("srpRequired", e.target.checked)}
                    className="w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                  />
                  <span className="text-sm font-medium text-gray-700 dark:text-gray-300">
                    SRP / Special Force Required
                  </span>
                </label>
              </div>

              <div className="flex items-center gap-4">
                <label className="flex items-center gap-2">
                  <input
                    type="checkbox"
                    checked={formData.trafficPoliceRequired}
                    onChange={(e) => handleInputChange("trafficPoliceRequired", e.target.checked)}
                    className="w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                  />
                  <span className="text-sm font-medium text-gray-700 dark:text-gray-300">
                    Traffic Police Required
                  </span>
                </label>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Shift Type
                </label>
                <select
                  value={formData.shiftType}
                  onChange={(e) => handleInputChange("shiftType", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  <option value="">Select Shift Type</option>
                  <option value="Single">Single</option>
                  <option value="Double">Double</option>
                  <option value="Triple">Triple</option>
                </select>
              </div>
            </div>


          </div>
        );

      case 2:
        return (
          <div className="space-y-6">
            <h3 className="text-xl font-bold text-gray-900 dark:text-white mb-4">
              Event / VIP Details
            </h3>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  VIP / Event Name <span className="text-red-500">*</span>
                </label>
                <input
                  type="text"
                  value={formData.vipEventName}
                  onChange={(e) => handleInputChange("vipEventName", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="e.g., Narendra Modi / Rath Yatra"
                  required
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  VIP Category
                </label>
                <select
                  value={formData.vipCategory}
                  onChange={(e) => handleInputChange("vipCategory", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  disabled={masterDataLoading}
                >
                  <option value="">{masterDataLoading ? "Loading..." : "Select Category"}</option>
                  {masterData.vipCategories.map((category) => (
                    <option key={category.id} value={category.id}>{category.name}</option>
                  ))}
                </select>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Expected Crowd Size
                </label>
                <input
                  type="number"
                  value={formData.expectedCrowdSize}
                  onChange={(e) => handleInputChange("expectedCrowdSize", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="Approximate count"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Threat Level
                </label>
                <select
                  value={formData.threatLevel}
                  onChange={(e) => handleInputChange("threatLevel", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  disabled={masterDataLoading}
                >
                  <option value="">{masterDataLoading ? "Loading..." : "Select Threat Level"}</option>
                  {masterData.threatLevels.map((level) => (
                    <option key={level.id} value={level.id}>{level.name}</option>
                  ))}
                </select>
              </div>
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                Intelligence Notes
              </label>
              <textarea
                value={formData.intelligenceNotes}
                onChange={(e) => handleInputChange("intelligenceNotes", e.target.value)}
                rows={4}
                className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="Optional confidential information..."
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                Route Map Upload
              </label>
              <input
                type="file"
                accept="image/*,.pdf"
                onChange={(e) => handleInputChange("routeMap", e.target.files[0])}
                className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <p className="text-xs text-gray-500 dark:text-gray-400 mt-1">
                Upload travel route map (if applicable)
              </p>
            </div>
          </div>
        );

      case 3:
        return (
          <div className="space-y-6">
            <h3 className="text-xl font-bold text-gray-900 dark:text-white mb-4">
              Bandobast Structure Setup
            </h3>
            <p className="text-sm text-gray-600 dark:text-gray-400 mb-4">
              Define the operational breakdown of areas, sectors, and points for this bandobast.
            </p>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Total Areas
                </label>
                <input
                  type="number"
                  value={formData.totalAreas}
                  onChange={(e) => handleInputChange("totalAreas", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="Count of areas"
                />
              </div>
            </div>

            <div className="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
              <p className="text-sm text-gray-700 dark:text-gray-300">
                <strong>Note:</strong> Dynamic area, sector, and point management will be available after initial bandobast creation. You can add detailed structure including GPS locations, point types, and sensitivity levels in the edit view.
              </p>
            </div>
          </div>
        );

      case 3:
        return (
          <div className="space-y-6">
            <h3 className="text-xl font-bold text-gray-900 dark:text-white mb-4">
              Officer Assignment Rules
            </h3>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Assignment Mode
                </label>
                <select
                  value={formData.assignmentMode}
                  onChange={(e) => handleInputChange("assignmentMode", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  <option value="">Select Mode</option>
                  <option value="Auto">Auto</option>
                  <option value="Manual">Manual</option>
                  <option value="Hybrid">Hybrid</option>
                </select>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Reporting Officer
                </label>
                <select
                  value={formData.reportingOfficer}
                  onChange={(e) => handleInputChange("reportingOfficer", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  <option value="">Select Officer</option>
                  <option value="PI">Police Inspector (PI)</option>
                  <option value="ACP">Assistant Commissioner of Police (ACP)</option>
                  <option value="DSP">Deputy Superintendent of Police (DSP)</option>
                </select>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Backup Officer
                </label>
                <select
                  value={formData.backupOfficer}
                  onChange={(e) => handleInputChange("backupOfficer", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  <option value="">Select Backup Officer (Optional)</option>
                  <option value="PI">Police Inspector (PI)</option>
                  <option value="ACP">Assistant Commissioner of Police (ACP)</option>
                  <option value="DSP">Deputy Superintendent of Police (DSP)</option>
                </select>
              </div>

              <div className="flex items-center">
                <label className="flex items-center gap-2">
                  <input
                    type="checkbox"
                    checked={formData.replacementAllowed}
                    onChange={(e) => handleInputChange("replacementAllowed", e.target.checked)}
                    className="w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                  />
                  <span className="text-sm font-medium text-gray-700 dark:text-gray-300">
                    Replacement Allowed on Absence
                  </span>
                </label>
              </div>
            </div>
          </div>
        );

      case 6:
        return (
          <div className="space-y-6">
            <h3 className="text-xl font-bold text-gray-900 dark:text-white mb-4">
              Duty Instructions & Guidelines
            </h3>

            <div>
              <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                General Instructions
              </label>
              <textarea
                value={formData.generalInstructions}
                onChange={(e) => handleInputChange("generalInstructions", e.target.value)}
                rows={4}
                className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="Common SOP and general guidelines..."
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                Point-wise Instructions
              </label>
              <textarea
                value={formData.pointwiseInstructions}
                onChange={(e) => handleInputChange("pointwiseInstructions", e.target.value)}
                rows={4}
                className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="Specific tasks for each point..."
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                Emergency Protocol
              </label>
              <textarea
                value={formData.emergencyProtocol}
                onChange={(e) => handleInputChange("emergencyProtocol", e.target.value)}
                rows={4}
                className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="What to do in crisis situations..."
              />
            </div>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Uniform Type
                </label>
                <select
                  value={formData.uniformType}
                  onChange={(e) => handleInputChange("uniformType", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  <option value="">Select Uniform Type</option>
                  <option value="Regular">Regular</option>
                  <option value="Ceremonial">Ceremonial</option>
                  <option value="Riot Gear">Riot Gear</option>
                </select>
              </div>
            </div>
          </div>
        );

      case 7:
        return (
          <div className="space-y-6">
            <h3 className="text-xl font-bold text-gray-900 dark:text-white mb-4">
              Communication & Notifications
            </h3>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div className="flex items-center">
                <label className="flex items-center gap-2">
                  <input
                    type="checkbox"
                    checked={formData.groupChatEnabled}
                    onChange={(e) => handleInputChange("groupChatEnabled", e.target.checked)}
                    className="w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                  />
                  <span className="text-sm font-medium text-gray-700 dark:text-gray-300">
                    Enable Bandobast Group Chat
                  </span>
                </label>
              </div>

              <div className="flex items-center">
                <label className="flex items-center gap-2">
                  <input
                    type="checkbox"
                    checked={formData.emergencyBroadcast}
                    onChange={(e) => handleInputChange("emergencyBroadcast", e.target.checked)}
                    className="w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                  />
                  <span className="text-sm font-medium text-gray-700 dark:text-gray-300">
                    Emergency Broadcast (One-click Alert)
                  </span>
                </label>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Language
                </label>
                <select
                  value={formData.language}
                  onChange={(e) => handleInputChange("language", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  <option value="">Select Language</option>
                  <option value="Gujarati">Gujarati</option>
                  <option value="English">English</option>
                  <option value="Both">Both</option>
                </select>
              </div>
            </div>

            <div className="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
              <p className="text-sm text-gray-700 dark:text-gray-300">
                <strong>Notification Modes:</strong> App notifications and SMS will be configured based on system settings.
              </p>
            </div>
          </div>
        );

      case 8:
        return (
          <div className="space-y-6">
            <h3 className="text-xl font-bold text-gray-900 dark:text-white mb-4">
              Monitoring & Tracking Settings
            </h3>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div className="flex items-center">
                <label className="flex items-center gap-2">
                  <input
                    type="checkbox"
                    checked={formData.liveLocationTracking}
                    onChange={(e) => handleInputChange("liveLocationTracking", e.target.checked)}
                    className="w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                  />
                  <span className="text-sm font-medium text-gray-700 dark:text-gray-300">
                    Enable Live Location Tracking (GPS)
                  </span>
                </label>
              </div>

              <div className="flex items-center">
                <label className="flex items-center gap-2">
                  <input
                    type="checkbox"
                    checked={formData.geoFencingEnabled}
                    onChange={(e) => handleInputChange("geoFencingEnabled", e.target.checked)}
                    className="w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                  />
                  <span className="text-sm font-medium text-gray-700 dark:text-gray-300">
                    Enable Geo-Fencing (Point Boundary)
                  </span>
                </label>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Location Update Interval
                </label>
                <select
                  value={formData.locationUpdateInterval}
                  onChange={(e) => handleInputChange("locationUpdateInterval", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  disabled={!formData.liveLocationTracking}
                >
                  <option value="">Select Interval</option>
                  <option value="30sec">30 seconds</option>
                  <option value="1min">1 minute</option>
                  <option value="5min">5 minutes</option>
                </select>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Attendance Mode
                </label>
                <select
                  value={formData.attendanceMode}
                  onChange={(e) => handleInputChange("attendanceMode", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  <option value="">Select Mode</option>
                  <option value="Auto GPS">Auto GPS</option>
                  <option value="Manual">Manual</option>
                </select>
              </div>
            </div>
          </div>
        );

      case 5:
        return (
          <div className="space-y-6">
            <h3 className="text-xl font-bold text-gray-900 dark:text-white mb-4">
              Approval & Post-Event Settings
            </h3>

            {/* Approval & Authority */}
            <div className="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg mb-4">
              <h4 className="text-lg font-semibold text-gray-800 dark:text-white mb-3">Approval & Authority</h4>
            </div>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Approving Authority <span className="text-red-500">*</span>
                </label>
                <select
                  value={formData.approvingAuthority}
                  onChange={(e) => handleInputChange("approvingAuthority", e.target.value)}
                  className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                  disabled={masterDataLoading}
                >
                  <option value="">{masterDataLoading ? "Loading..." : "Select Authority"}</option>
                  {masterData.approvingAuthorities.map((authority) => (
                    <option key={authority.id} value={authority.id}>{authority.designation}</option>
                  ))}
                </select>
              </div>
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                Remarks / Comments
              </label>
              <textarea
                value={formData.remarks}
                onChange={(e) => handleInputChange("remarks", e.target.value)}
                rows={4}
                className="w-full px-4 py-2 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="Approval comments or special notes..."
              />
            </div>

            <div className="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800">
              <p className="text-sm text-yellow-800 dark:text-yellow-200">
                <strong>Note:</strong> This bandobast will be saved as "Draft" and will require approval from the selected authority before activation.
              </p>
            </div>

            {/* Post-Bandobast Settings */}
            <div className="bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-lg mt-6 mb-4">
              <h4 className="text-lg font-semibold text-gray-800 dark:text-white mb-3">Post-Bandobast Settings</h4>
            </div>

            <div className="space-y-4">
              <div className="flex items-center">
                <label className="flex items-center gap-2">
                  <input
                    type="checkbox"
                    checked={formData.autoReportGeneration}
                    onChange={(e) => handleInputChange("autoReportGeneration", e.target.checked)}
                    className="w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                  />
                  <span className="text-sm font-medium text-gray-700 dark:text-gray-300">
                    Enable Auto Report Generation
                  </span>
                </label>
              </div>

              <div className="flex items-center">
                <label className="flex items-center gap-2">
                  <input
                    type="checkbox"
                    checked={formData.incidentLogging}
                    onChange={(e) => handleInputChange("incidentLogging", e.target.checked)}
                    className="w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                  />
                  <span className="text-sm font-medium text-gray-700 dark:text-gray-300">
                    Enable Incident Logging During Event
                  </span>
                </label>
              </div>

              <div className="flex items-center">
                <label className="flex items-center gap-2">
                  <input
                    type="checkbox"
                    checked={formData.photoVideoUpload}
                    onChange={(e) => handleInputChange("photoVideoUpload", e.target.checked)}
                    className="w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                  />
                  <span className="text-sm font-medium text-gray-700 dark:text-gray-300">
                    Allow Photo / Video Upload (Evidence)
                  </span>
                </label>
              </div>

              <div className="flex items-center">
                <label className="flex items-center gap-2">
                  <input
                    type="checkbox"
                    checked={formData.feedbackRequired}
                    onChange={(e) => handleInputChange("feedbackRequired", e.target.checked)}
                    className="w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                  />
                  <span className="text-sm font-medium text-gray-700 dark:text-gray-300">
                    Require Officer Feedback After Event
                  </span>
                </label>
              </div>
            </div>

            <div className="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800">
              <p className="text-sm text-green-800 dark:text-green-200">
                <strong>Ready to Submit!</strong> Review all sections and click "Create Bandobast" to save this bandobast as a draft for approval.
              </p>
            </div>
          </div>
        );

      default:
        return (
          <div className="text-center py-12">
            <p className="text-gray-600 dark:text-gray-400">
              Section {currentStep + 1} content will be implemented here
            </p>
          </div>
        );
    }
  };


  return (
    <div className="bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden max-w-full">
      {/* Header */}
      <div className="bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 px-4 sm:px-6 py-4 sm:py-5 border-b border-gray-200 dark:border-gray-700">
        <div className="flex items-center gap-3">
          <div className="w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0">
            <Shield className="w-6 h-6 text-white" />
          </div>
          <div className="min-w-0 flex-1">
            <h2 className="text-xl sm:text-2xl font-bold text-gray-800 dark:text-white truncate">
              Create New Bandobast
            </h2>
            <p className="text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 truncate">
              Step {currentStep + 1} of {steps.length}: {steps[currentStep].title}
            </p>
          </div>
        </div>
      </div>

      {/* Progress Bar */}
      <div className="px-4 sm:px-6 py-3 sm:py-4 bg-gray-50 dark:bg-gray-700/50">
        <div className="flex items-center justify-between mb-2">
          <span className="text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300">
            Progress
          </span>
          <span className="text-xs sm:text-sm font-medium text-blue-600 dark:text-blue-400">
            {Math.round(((currentStep + 1) / steps.length) * 100)}%
          </span>
        </div>
        <div className="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2">
          <div
            className="bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full transition-all duration-300"
            style={{ width: `${((currentStep + 1) / steps.length) * 100}%` }}
          />
        </div>
      </div>

      {/* Steps Navigation */}
      <div className="border-b border-gray-200 dark:border-gray-700 overflow-x-hidden">
        <div className="px-4 sm:px-6 py-3 overflow-x-auto">
          <div className="flex gap-1.5 sm:gap-2 pb-1">
            {steps.map((step, index) => {
              const StepIcon = step.icon;
              const isActive = currentStep === index;
              const isCompleted = currentStep > index;

              return (
                <button
                  key={step.id}
                  onClick={() => setCurrentStep(index)}
                  className={`flex items-center gap-1.5 px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg font-medium text-xs whitespace-nowrap transition-all flex-shrink-0 ${isActive
                    ? "bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg"
                    : isCompleted
                      ? "bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"
                      : "bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"
                    }`}
                >
                  <StepIcon className="w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0" />
                  <span className="hidden lg:inline text-xs">{step.title}</span>
                  <span className="lg:hidden">{index + 1}</span>
                </button>
              );
            })}
          </div>
        </div>
      </div>

      {/* Form Content */}
      <form onSubmit={handleSubmit}>
        <div className="p-4 sm:p-6">{renderStepContent()}</div>

        {/* Form Actions */}
        <div className="px-4 sm:px-6 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3">
          <button
            type="button"
            onClick={() => router.push("/my-admin/bandobasts")}
            className="px-6 py-2.5 rounded-xl border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-all flex items-center gap-2"
          >
            <X className="w-4 h-4" />
            Cancel
          </button>

          <div className="flex items-center gap-3">
            {currentStep > 0 && (
              <button
                type="button"
                onClick={handlePrevious}
                className="px-6 py-2.5 rounded-xl bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-300 dark:hover:bg-gray-500 transition-all flex items-center gap-2"
              >
                <ChevronLeft className="w-4 h-4" />
                Previous
              </button>
            )}

            {currentStep < steps.length - 1 ? (
              <button
                type="button"
                onClick={handleNext}
                className="px-6 py-2.5 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-medium transition-all shadow-lg hover:shadow-xl flex items-center gap-2"
              >
                Next
                <ChevronRight className="w-4 h-4" />
              </button>
            ) : (
              <button
                type="submit"
                className="px-6 py-2.5 rounded-xl bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-medium transition-all shadow-lg hover:shadow-xl flex items-center gap-2"
              >
                <Save className="w-4 h-4" />
                Create Bandobast
              </button>
            )}
          </div>
        </div>
      </form>

      {/* Staff Management Modal */}
      {showStaffModal && (
        <StaffManagement
          onClose={() => setShowStaffModal(false)}
          initialStaffList={staffList}
          onSave={setStaffList}
        />
      )}
    </div>
  );
}
